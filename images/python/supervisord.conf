[supervisord]
nodaemon=true
loglevel=info
user=root
pidfile=/var/run/supervisord.pid
logfile=/var/log/supervisor/supervisord.log
logfile_maxbytes=10MB
logfile_backups=3

[program:xvfb]
command=Xvfb :1 -screen 0 1280x1024x24 -ac +extension GLX +render -noreset
priority=1
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:x11vnc]
command=x11vnc -display :1 -forever -shared -passwdfile /root/.vnc/plaintext_passwd -ncache 10 -geometry 1280x1024
priority=2
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:playwright]
# Using fixed version from Dockerfile/entrypoint
command=npx playwright@1.51.1 run-server --port 3000 --host 0.0.0.0
priority=10
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=DISPLAY=":1"

[program:ttyd]
command=/usr/local/bin/ttyd -W -p 7681 bash
priority=10
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0 